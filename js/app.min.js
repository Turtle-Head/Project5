var ViewModel={nonce_generate:function(){var c=5+(Math.floor(Math.random()*32));var d="";var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var b=0;b<c;b++){d+=a.charAt(Math.floor(Math.random()*a.length))}return d},importYelp:function(a,b){var f=YELP_BASE_URL;var d={oauth_consumer_key:YELP_KEY,oauth_token:YELP_TOKEN,oauth_nonce:ViewModel.nonce_generate(),oauth_timestamp:Math.floor(Date.now()/1000),oauth_signature_method:"HMAC-SHA1",oauth_version:"1.0",callback:"cb",limit:20,term:a,location:b};var e=oauthSignature.generate("GET",f,d,YELP_KEY_SECRET,YELP_TOKEN_SECRET);d.oauth_signature=e;var c={url:f,data:d,cache:true,dataType:"jsonp",success:function(g){console.log(g)},error:function(){console.log("Failed to import Data")}};$.ajax(c)},searchString:function(b){var a=b;a=a.replace(" ","+");a=a.replace(", ","+");a=a.replace(",","+");a=a.replace("++","+");return(a)},gMap:function(f){var b;var c={disableDefaultUI:true,noClear:true};map=new google.maps.Map(document.querySelector("#map"),c);function e(){var h=[];h.push(f.location);return h}function a(n){var l=n.geometry.location.lat();var m=n.geometry.location.lng();var i=n.formatted_address;var k=window.mapBounds;var h=new google.maps.Marker({map:map,position:n.geometry.location,title:i});var j=new google.maps.InfoWindow({content:i});google.maps.event.addListener(h,"click",function(){j.open(map,h)});k.extend(new google.maps.LatLng(l,m));map.fitBounds(k);map.setCenter(k.getCenter())}function g(i,h){if(h==google.maps.places.PlacesServiceStatus.OK){a(i[0])}}function d(i){var h=new google.maps.places.PlacesService(map);for(var j in i){var k={query:i[j]};h.textSearch(k,g)}}window.mapBounds=new google.maps.LatLngBounds();b=e();d(b)},importWiki:function(b){var c="http://en.wikipedia.org/w/api.php?action=opensearch&search="+b+"&format=json&callback=wikiCallback";var a=setTimeout(function(){console.log("Failed to get wikipedia resources")},8000);$.ajax({url:c,dataType:"jsonp",success:function(d){var e=d[1];console.log(e);clearTimeout(a)}})},};var Model={yelpData:{},mapData:{},wikiData:{}};var View={};